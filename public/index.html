<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Help</title>
    <link rel="icon" href="/help.png" sizes="64x64" type="image/png">

    <!-- css framework -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

    <!-- tools and helpers -->
    <script src="helpers.js"></script>

</head>

<body>
    <div id="app">
        <!-- application -->
        <div>
            <!-- ui -->
            <div class="container">
                <form @submit.prevent="requestCreate" class="was-validated row gy-2 gx-3">

                    <div class="">
                        <label class="visually-hidden" for="geolocation">geolocation</label>
                        <input type="hidden" class="form-control" placeholder="geolocation" id="geolocation" required
                            :disabled="h.process" v-model="h.m.request.geolocation">
                    </div>

                    <div class="col-auto">
                        <label class="visually-hidden" for="cityName">city</label>
                        <select class="form-select" placeholder="city name" id="cityName" required :disabled="h.process"
                            v-model="h.m.request.cityName">
                            <option v-for="city in h.cities" :key="city._id" v-html="city.cityName"></option>
                        </select>
                    </div>
                    <div class="col-auto">
                        <label class="visually-hidden" for="typeOfNeed">typeOfNeed</label>
                        <select class="form-select" placeholder="type of need" id="typeOfNeed" required
                            :disabled="h.process" v-model="h.m.request.typeOfNeed">
                            <option v-for="need in h.needs" :key="need._id" v-html="need.kind"></option>
                        </select>
                    </div>

                    <div class="col-auto">
                        <button class="btn btn-success" type="submit" :disabled="h.process">Help Request</button>
                    </div>

                </form>

                <main>
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">city</th>
                                <th scope="col">volunteer</th>
                                <th scope="col">need</th>
                                <th scope="col">calendar</th>
                                <th scope="col">geolocation</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="rvp in m.rvps">
                                <td v-html="rvp.cityName"></td>
                                <td>
                                    <span class="badge bg-secondary" v-html="rvp.volunteers"></span>
                                    <a href="#" data-bs-toggle="modal" data-bs-target="#modal" title="be volunteer">
                                        <img src="help.png" width="32" alt="volunteer">
                                    </a>
                                </td>
                                <td v-html="rvp.typeOfNeed"></td>
                                <td v-html="rvp.calendar"></td>
                                <td v-html="rvp.geolocation.accuracy"></td>
                            </tr>
                        </tbody>
                    </table>
                </main>
            </div>

            <!-- component -->

            <div class="toast-container p-3 bottom-0 end-0" id="toastPlacement"
                data-original-class="toast-container p-3">

                <div v-show="h.process" class="toast fade show" role="alert" aria-live="assertive" aria-atomic="true">
                    <div class="toast-header">
                        <img src="help.png" class="bd-placeholder-img rounded me-2" width="20" />
                        <strong class="me-auto">New Request</strong>
                        <small class="text-muted">5 sec ago</small>
                        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                    <div class="toast-body">
                        We forward your request to our volunteers.
                    </div>
                </div>

                <div v-show="m.process" class="toast fade show" role="alert" aria-live="assertive" aria-atomic="true">
                    <div class="toast-header">
                        <img src="help.png" class="bd-placeholder-img rounded me-2" width="20" />
                        <strong class="me-auto">New volunteer</strong>
                        <small class="text-muted">11 mins ago</small>
                        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                    <div class="toast-body">
                        We have a new volunteer.
                    </div>
                </div>
            </div>

            <div v-show="h.process" class="modal" tabindex="-1" id="modal">
                <div class="modal-dialog dialog modal-lg">
                    <div class="modal-content">

                        <form @submit.prevent="becomeVolunteer" class="was-validated">
                            <div class="modal-header">
                                <h5 class="modal-title">Become a volunteer</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                                </button>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    <div class="row">
                                        <div class="col-8">
                                            <p>Dear volunteer <b>.</b></p>
                                            <p>Enter your details to fulfill the request and volunteer<b>.</b></p>
                                            <div class="form-group">
                                                <label for="emailAddress" class="form-label">Email address</label>
                                                <input :disabled="m.process" value="" type="email" class="form-control"
                                                    id="emailAddress" placeholder="name@example.com" required />
                                                <div class="valid-feedback">Looks good!</div>
                                                <div class="invalid-feedback">Please provide a valid email.</div>
                                            </div>
                                        </div>
                                        <div class="col-4">
                                            <ul class="list-group">
                                                <li class="list-group-item bg-warning">Collaborators
                                                    <span class="badge badge-primary badge-pill">0</span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button :disabled="m.process" type="submit" class="btn btn-outline-success">
                                    <img src="help.png" width="20" />
                                    <span>Send</span>
                                </button>
                            </div>
                        </form>

                    </div>
                </div>
            </div>

        </div>
        <!-- / application -->
    </div>

    <!-- Application -->
    <script type="module" src="app.js"></script>

</body>

</html>